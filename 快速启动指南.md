# å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ å¯åŠ¨æ–¹å¼ï¼ˆä»…æ•°æ®åº“ä½¿ç”¨Dockerï¼‰

### æ¶æ„è¯´æ˜
- **MySQLæ•°æ®åº“**: Dockerè¿è¡Œ
- **åç«¯æœåŠ¡**: æ‰‹åŠ¨å¯åŠ¨ï¼ˆMavenï¼‰
- **å‰ç«¯æœåŠ¡**: æ‰‹åŠ¨å¯åŠ¨ï¼ˆnpmï¼‰

### å‰ç½®è¦æ±‚
- Dockerï¼ˆç”¨äºMySQLï¼‰
- JDK 17+
- Maven 3.6+
- Node.js 18+
- npm

### å¯åŠ¨æ­¥éª¤

#### 1. å¯åŠ¨MySQLæ•°æ®åº“ï¼ˆDockerï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
docker-compose up -d mysql

# æŸ¥çœ‹MySQLçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹MySQLæ—¥å¿—
docker-compose logs mysql
```

ç­‰å¾…çº¦10-30ç§’ï¼Œç›´åˆ°MySQLå®Œå…¨å¯åŠ¨ã€‚

#### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd library-backend
mvn spring-boot:run
```

åç«¯å°†è¿è¡Œåœ¨: `http://localhost:8080`

#### 3. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰

```bash
cd library-frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨: `http://localhost:3000`

### åœæ­¢æœåŠ¡

```bash
# åœæ­¢åç«¯/å‰ç«¯ï¼šåœ¨è¿è¡Œçª—å£æŒ‰ Ctrl+C

# åœæ­¢MySQL
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®
docker-compose down -v
```

---

## ğŸ”§ å…¶ä»–å¯åŠ¨æ–¹å¼

### åç«¯å¯åŠ¨

#### å‰ç½®è¦æ±‚
- JDK 17+
- Maven 3.6+
- MySQL 8.0+

#### æ­¥éª¤

1. **åˆ›å»ºæ•°æ®åº“**
```sql
CREATE DATABASE library CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. **ä¿®æ”¹æ•°æ®åº“é…ç½®**
ç¼–è¾‘ `src/main/resources/application.yml`ï¼š
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/library?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai&characterEncoding=utf8&useUnicode=true
    username: root
    password: your_password
```

3. **å¯åŠ¨åç«¯**
```bash
cd library-backend
mvn spring-boot:run
```

åç«¯å°†è¿è¡Œåœ¨: http://localhost:8080

### å‰ç«¯å¯åŠ¨

#### å‰ç½®è¦æ±‚
- Node.js 18+
- npm æˆ– yarn

#### æ­¥éª¤

1. **å®‰è£…ä¾èµ–**
```bash
cd library-frontend
npm install
```

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨: http://localhost:3000

---

## ğŸ“ é¦–æ¬¡ä½¿ç”¨

1. **è®¿é—®å‰ç«¯**: http://localhost:3000

2. **æ³¨å†Œè´¦å·**
   - ç‚¹å‡»"ç«‹å³æ³¨å†Œ"
   - å¡«å†™ç”¨æˆ·åã€å¯†ç 
   - é€‰æ‹©è§’è‰²ï¼ˆuser æˆ– adminï¼‰
   - ç‚¹å‡»æ³¨å†Œ

3. **ç™»å½•ç³»ç»Ÿ**
   - ä½¿ç”¨æ³¨å†Œçš„è´¦å·ç™»å½•
   - ç™»å½•æˆåŠŸåä¼šè‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ

4. **å¼€å§‹ä½¿ç”¨**
   - æ·»åŠ åˆ†ç±»
   - æ·»åŠ å›¾ä¹¦
   - å€Ÿé˜…å›¾ä¹¦
   - ç®¡ç†ç”¨æˆ·ï¼ˆéœ€è¦adminæƒé™ï¼‰

---

## ğŸ”‘ é»˜è®¤é…ç½®

### æ•°æ®åº“
- **MySQL**: 
  - Host: localhost
  - Port: 3306
  - Database: library
  - Username: root
  - Password: root (Docker) / ä½ çš„å¯†ç  (æ‰‹åŠ¨)

### JWTé…ç½®
- **Secret**: <REDACTED â€” è¯·é€šè¿‡ç¯å¢ƒå˜é‡ JWT_SECRET æ³¨å…¥ï¼Œåˆ‡å‹¿åœ¨ä»“åº“ä¸­ä¿å­˜æ˜æ–‡å¯†é’¥>
- **Expiration**: 24å°æ—¶

### ç«¯å£
- **åç«¯**: 8080
- **å‰ç«¯**: 3000
- **MySQL**: 3306

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. Dockerå¯åŠ¨å¤±è´¥

**é—®é¢˜**: ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :8080
netstat -ano | findstr :3306
netstat -ano | findstr :3000

# ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„
```

**é—®é¢˜**: MySQLå¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹MySQLæ—¥å¿—
docker-compose logs mysql

# æ£€æŸ¥æ•°æ®å·
docker volume ls
```

### 2. åç«¯æ— æ³•è¿æ¥æ•°æ®åº“

**æ£€æŸ¥é¡¹**:
- MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- æ•°æ®åº“æ˜¯å¦å·²åˆ›å»º
- ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- è¿æ¥URLæ˜¯å¦æ­£ç¡®

### 3. å‰ç«¯æ— æ³•è¿æ¥åç«¯

**æ£€æŸ¥é¡¹**:
- åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- åç«¯ç«¯å£æ˜¯å¦ä¸º8080
- æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- CORSé…ç½®æ˜¯å¦æ­£ç¡®

### 4. JWT Tokenæ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
- æ¸…é™¤æµè§ˆå™¨localStorage
- é‡æ–°ç™»å½•è·å–æ–°Token
- æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸï¼ˆ24å°æ—¶ï¼‰

---

## ğŸ“Š å¥åº·æ£€æŸ¥

### åç«¯å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8080/api/health
```

### æ•°æ®åº“è¿æ¥æ£€æŸ¥
```bash
# Dockeræ–¹å¼
docker-compose exec mysql mysql -uroot -proot -e "SHOW DATABASES;"

# æ‰‹åŠ¨æ–¹å¼
mysql -uroot -p -e "SHOW DATABASES;"
```

---

## ğŸ”„ å¼€å‘æ¨¡å¼

### åç«¯çƒ­é‡è½½
ä½¿ç”¨Spring Boot DevToolsï¼ˆå·²åŒ…å«ï¼‰ï¼š
```bash
mvn spring-boot:run
# ä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨é‡å¯
```

### å‰ç«¯çƒ­é‡è½½
Viteé»˜è®¤æ”¯æŒï¼š
```bash
npm run dev
# ä¿®æ”¹ä»£ç åè‡ªåŠ¨åˆ·æ–°
```

---

## ğŸ“¦ ç”Ÿäº§éƒ¨ç½²

### åç«¯
```bash
# æ„å»º
mvn clean package

# è¿è¡Œ
java -jar target/library-backend-0.0.1-SNAPSHOT.jar
```

### å‰ç«¯
```bash
# æ„å»º
npm run build

# éƒ¨ç½²distç›®å½•åˆ°Nginx
# é…ç½®nginx.confä¸­çš„APIä»£ç†
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. ä¿®æ”¹JWTå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
2. é…ç½®HTTPS
3. è®¾ç½®æ•°æ®åº“å¤‡ä»½
4. é…ç½®æ—¥å¿—ç³»ç»Ÿ
5. æ·»åŠ ç›‘æ§å’Œå‘Šè­¦

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ—¥å¿—æ–‡ä»¶
2. æµè§ˆå™¨æ§åˆ¶å°
3. Dockeræ—¥å¿—
4. é¡¹ç›®æ–‡æ¡£

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰



