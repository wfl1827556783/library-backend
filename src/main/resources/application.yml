spring:
  application:
    name: library-backend
  
  datasource:
    url: jdbc:mysql://localhost:3306/library?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai&characterEncoding=utf8&useUnicode=true
    username: ${DB_USERNAME:}
    password: ${DB_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect
        use_sql_comments: true

  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Shanghai
    default-property-inclusion: non_null

server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# JWT配置
jwt:
  # 为安全起见，secret 请通过环境变量或外部配置注入（例如环境变量 JWT_SECRET）
  secret: ${JWT_SECRET:}
  expiration: ${JWT_EXPIRATION:86400000} # 24小时，单位：毫秒

# H2数据库配置（可选，用于测试）
# 如果需要使用H2数据库，请注释掉上面的MySQL配置，并取消下面的注释
#spring:
#  datasource:
#    url: jdbc:h2:mem:library
#    driver-class-name: org.h2.Driver
#    username: sa
#    password:
#  h2:
#    console:
#      enabled: true
#      path: /h2-console
#  jpa:
#    hibernate:
#      ddl-auto: create-drop
#    database-platform: org.hibernate.dialect.H2Dialect

logging:
  level:
    root: INFO
    com.library: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    # 降低静态资源404的日志级别，避免favicon.ico等请求产生大量警告
    org.springframework.web.servlet.resource: WARN
